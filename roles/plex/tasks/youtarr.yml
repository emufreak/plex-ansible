---
- name: Ensure Youtarr directories exist
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    owner: plex
    group: plex
    mode: "0755"
  loop:
    - "{{ youtarr_base_dir }}"
    - "{{ youtarr_base_dir }}/config"
    - "{{ youtarr_base_dir }}/jobs"
    - "{{ youtarr_base_dir }}/server/images"
    - "{{ youtarr_youtube_output_dir }}"

- name: Ensure Youtarr database directory exists with MariaDB ownership
  ansible.builtin.file:
    path: "{{ youtarr_base_dir }}/database"
    state: directory
    owner: "{{ youtarr_db_uid }}"
    group: "{{ youtarr_db_gid }}"
    mode: "0755"
